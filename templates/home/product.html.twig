{% extends 'base.html.twig' %}

{% block body %}
    {% include 'home/news.html.twig' %}
    <div class="container mt-3 d-flex justify-content-center">
        {% for category, messages in app.flashes %}
            {% for message in messages %}
                <div class="text-center card-shadow col-6 alert alert-{{ category }}">
                    <p>{{ message }}</p>
                    <a href="{{ path('cart_index') }}" class="btn btn-dark">Voir mon panier !</a>
                </div>
            {% endfor %}
        {% endfor %}
    </div>
    <div class="container mt-3 mb-5">
        <h3 class="text-center">
            <a class="text-dark" href="{{ path('subCategory_index', {'id': subCateg.id}) }}">{{ subCateg.name }}</a> /
            <a class="text-dark" href="{{ path('subCategory2_index', {'id': subCateg2.id}) }}">{{ subCateg2.name }}</a>
        </h3>
    </div>
    <div class="container mt-3 d-md-flex ">
        <div id="carouselExampleIndicators" class="carousel slide mb-4 col-md-6" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="{{ product.images[0].id }}" class="active"></li>
                {% for image in product.images %}
                <li data-target="#carouselExampleIndicators" data-slide-to="{{ image.id }}"></li>
                {% endfor %}
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="{{ asset('uploads/files/' ~ product.images[0]) }}" class="d-block w-100" alt="...">
                </div>
                {% for image in product.images %}
                <div class="carousel-item">
                    <img src="{{ asset('uploads/files/' ~ image) }}" class="d-block w-100" alt="...">
                </div>
                {% endfor %}
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        <div class="product-description ml-5 col-md-5">
            <h1>{{ product.name }}</h1>
            <h3>{{ product.price }} â‚¬</h3>
            {% if sizes != null %}
            <form method="post">
                <div class="form-group">
                    <label for="exampleFormControlSelect1">Tailles :</label>
                    <select class="form-control w-25" name="size" id="exampleFormControlSelect1">
                    {% for size in sizes %}
                        <option value="{{ size }}">{{ size }}</option>
                    {% endfor %}
                    </select>
                </div>
                <p class="mt-3">{{ product.description | raw }}</p>
                <button type="submit" class="btn btn-dark mt-3">Ajouter au Panier</button>
            </form>
            {% else %}
            <p class="mt-3">{{ product.description | raw }}</p>
            <a href="{{ path('cart_add', {'id': stockId}) }}" class="btn btn-dark mt-3">Ajouter au Panier</a>
            {% endif %}
        </div>
    </div>
{% endblock %}